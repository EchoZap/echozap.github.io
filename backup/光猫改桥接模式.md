_该例使用 HG6145D 移动光猫（北京烽火终端）_

# 1.获取超级账户和密码
## 1.1 获取光猫 MAC 地址
在终端输入：
```shell
arp -a
```

或者查看光猫背后名牌。

1.在输出结果中找到192.168.1.1对应的那一行的“物理地址”，这就是MAC地址，形如“ad-jb-26-73-48-c2”。选中后直接按Ctrl+C复制，再粘贴到记事本等文本工具中。
2.把记录的MAC地址全部全部转换为大写字母，并删除所有横杠（“-”），最终得到12位字符（大写字母和数字）的结果，形如“AFJB267348C2”。

**注意：**
非Windows操作系统用类似方法查询到的MAC地址中的分隔符可能是冒号而不是横杠，且分隔符之间可能只有1位字符，如“C8:6J:12:3:48:C”，这时需要在所有的1位字符前手动补上一个数字0。总之，最终的结果是一串12位的大写字母和数字。

## 1.2 开启光猫Telnet
在浏览器地址栏输入如下URL，记得在末尾添加刚才得到的经过转换的12位MAC地址（无需引号）。
```shell
http:/192.168.1.1/cgi-bin/telnetenable.cgi?telnetenable=1&key=“12位大写字母和数字”
```
输入的最终URL形如：
```shell
http:/192.168.1.1/cgi-bin/telnetenable.cgi?telnetenable=1&key=AFJB267348C2
```
输入完成后按下回车访问该URL，应该看到“Telenet开启”的提示。若提示错误，请检查输入的url和转换后的MAC地址是否正确。

> 如遭遇错误， mac 地址如果尾数是0，要加1。

---

# 2.通过Telnet获取超级账户名和密码

> 如果使用 windows ，可能需要提前开启 telnet 功能：
> 打开开始菜单，搜索“启用或关闭”，在结果中找到“启用或关闭 Windows 功能”并打开，勾选“Telnet客户端”后确定，等待Windows完成Telnet功能的开启。
![windows_telnet](https://pub-a25b6a83a2d846958fb63f69d07d79a5.r2.dev/windows_telnet.png)

在终端输入并回车以下内容并回车：
```shell
telnet 192.168.1.1
```
界面会显示“login:”字样。在其后面输入以下内容并回车：
```shell
admin
```
1.界面会显示“password:”。在其后输入密码，密码为“Fh@”加上刚才转换的MAC地址的后6位，形如“Fh@7348C2”。注意MAC地址的字母在这里同样要大写，且密码输入界面不会显示输入的情况，需要盲打。密码输入完成后回车。
2.界面会显示一个“#”或“$”符号。这时输入如下内容（每输入一行就回车）：
```shell
load_cli factory
show admin_name
show admin_pwd
```
得到的结果如下图所示，其中“admin_name=”后面接上的就是超级账户，“admin_pwd=”后面接上的就是超级密码，注意账户名和密码都区分大小写。
![su](https://pub-a25b6a83a2d846958fb63f69d07d79a5.r2.dev/移动光猫HG6145D超级用户账号.png)

---

# 3.获取宽带账户名和密码

> ⚠️在没有明确获取宽带账号和密码前，请别急着把光猫改桥接，因为没有宽带账号和密码就无法在路由器拨号上网。后续要找回宽带账号密码比较麻烦。

在安装宽带时，师傅可能只会提供宽带账户名而不告诉宽带密码（理由可能是“现在都是自动下发的”、“我们也不知道”等等）。而更改光猫为桥接后需要在路由器手动拨号上网，这就需要知道宽带密码。可以尝试询问中国移动的宽带客服获取密码，但在拥有光猫的超级账户之后，不用联系客服也能找到记录在光猫中的宽带密码。

1.在浏览器地址栏输入 `192.168.1.1` （不同光猫可能地址不同，具体请查看其背后铭牌）并回车，然后用刚才获取到的超级账户登录光猫管理后台。

2.切换到“网络-宽带设置“页面。首先查看 “连接模式” 的模式和 “业务类型” 的类型，如果是 `路由`、 `管理`且处于不能编辑状态，则在 “连接名称” 一个一个切换，直到看到 “连接模式” 中的路由可以编辑以及 “业务类型” 中的类型是 `上网` ，此时的 “封装类型” 应该是 `PPPoE` ，宽带用户名和密码输入框会显示在当前界面。
![img](https://pub-a25b6a83a2d846958fb63f69d07d79a5.r2.dev/光猫桥接模式设置.png)

3.在宽带设置页面，打开浏览器的开发者工具-检查。右键网页然后选择“检查”。总之，确保检查功能为启用状态。把鼠标指向密码输入框，“元素”窗口会出现形如<input type=”password” class=”input_text_valid”…>的内容。

4.在 “检查-元素” 窗口中双击这段内容的type=“password”部分，进入编辑状态，将password改为text。这时，宽带密码将明文显示出来。务必在此时记下宽带账户和密码，否则后续光猫改为桥接后会丢失这些信息。

---

# 4.更改光猫为桥接模式
记下宽带账号密码后，同样在”网络-宽带设置“页面，就可以把”连接模式“从”路由“改为”桥接”了。随后，滚动到页面底部保存修改并退出光猫管理后台。最后，重启光猫即可让桥接模式生效。

> 若要使光猫在桥接模式下正常工作，有的地区还需要删除”连接名称”里包含”vlan69“或”TR069“的项目，具体方法看下一节。

---

# 5.删除TR069-摆脱运营商对你的光猫控制

## 5.1 什么是TR069？
TR069是 CPE 和 ACS之间沟通的通讯协定。CPE 可以借着这个协定完成服务开通、功能设定、档案上传下载、系统检测 等等初始化及营运管理的必须动作。简单来说你的运营商通过这个东西远程控制你的光猫进行修改，业务下发。

## 5.2 如何删除？

通过 `超级用户` 登录你的光猫后台（一般地址是192.168.1.1）  
打开 “网络-宽带设置-Internet连接“”   
找到 “连接名称” 是 `tr069` 的项（如果删除按钮可以直接点）  
右键网页然后选择“检查”  
再点击那个不能按的删除键   
找到有阴影选中的那一项  
右键-编辑为HTML，将 `disabled` 删除
现在你就发现删除按钮可以点了。那么将其删除。

至此，你已经摆脱了运营商对你的光猫控制。